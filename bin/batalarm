#!/bin/bash

which acpi &>/dev/null
if [[ ! $? ]]; then
  echo "error: batalarm requires acpi (binary)"
  exit 1
fi

which notify-send &>/dev/null
if [[ ! $? ]]; then
  echo "error: batalarm requires libnotify"
  exit 1
fi

bat_perc=$(acpi -b | awk '{print $4}' | cut -c1-2)
while true; do
  if (( bat_perc < 30 )); then
    notify-send "Battery State:" "$bat_perc% Remaining"
  fi
  sleep 300
done
