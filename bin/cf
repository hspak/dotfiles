#!/bin/bash

if [[ -z "$1" ]]; then
  echo "usage: cf <executable>"
  exit 0
fi

[[ -z "$EDITOR" ]] && editor="$EDITOR" || editor="vim"

app="$1"
configs=(".$1rc" \
         ".$1config" \
         ".$1.conf" \
         "$1.conf" \
         "$1rc" \
         "$1rc" \
         "config")

paths=("$XDG_CONFIG_HOME" \
       "$HOME/.$app" \
       "$HOME/.config" \
       "$HOME/.config/$app" \
       "$HOME")

config_path=""
for path in "${paths[@]}"; do
  [[ -z "$path" ]] && continue
  echo "looking in $path/..."

  for config in "${configs[@]}"; do
    if [[ -d $path ]] && [[ -e "$path/$config" ]]; then
      config_path="$path/$config"
      break 2
    fi
  done
done

if [[ -z "$config_path" ]]; then
  echo "Sorry! Couldn't find the config file for $app..."
else
  echo "opening $config_path with $editor"
  $editor $config_path
fi

exit 0
