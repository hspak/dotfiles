#!/bin/bash

blvl=$(cat /sys/class/backlight/acpi_video0/brightness)

get_icon () {
  local icon_name display_brightness=$1

  if (( display_brightness == 0 )); then
    icon_name="off"
  elif ((display_brightness < 5 )); then
    icon_name="low"
  elif ((display_brightness < 10 )); then
    icon_name="medium"
  elif ((display_brightness < 15 )); then
    icon_name="high"
  else
    icon_name="full"
  fi

  printf "notification-display-brightness-%s" "$icon_name"
}

notify-send " " \
    -i $(get_icon $blvl) \
    -t 1000 \
    -h int:value:$(($blvl*7)) \
    -h string:synchronous:backlight
